{"ast":null,"code":"// Forms\nimport { FormControl, FormGroup, Validators } from '@angular/forms'; // Custom Validators\n\nimport { isUrlValidator } from '../../../core/directives/is-url.directive';\nimport { isIsbnValidator } from '../../../core/directives/is-isbn.directive';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../core/services/book.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction BookEditComponent_div_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book title is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_8_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.title.errors.required);\n  }\n}\n\nfunction BookEditComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book author is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_12_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.author.errors.required);\n  }\n}\n\nfunction BookEditComponent_div_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book genre is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_16_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.genre.errors.required);\n  }\n}\n\nfunction BookEditComponent_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book release year is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_20_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.year.errors.required);\n  }\n}\n\nfunction BookEditComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book description must be more than 10 symbols long \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_24_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.description.errors.required || ctx_r5.description.errors.minlength);\n  }\n}\n\nfunction BookEditComponent_div_28_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book cover is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_28_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book cover must be a valid Url \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_28_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵtemplate(2, BookEditComponent_div_28_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.cover.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.cover.errors.isUrl);\n  }\n}\n\nfunction BookEditComponent_div_32_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book isbn is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_32_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Please specify a valid ISBN \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_32_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵtemplate(2, BookEditComponent_div_32_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.isbn.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.isbn.errors.isIsbn);\n  }\n}\n\nfunction BookEditComponent_div_36_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book pages count is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_36_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Pages count must be positive number \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_36_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵtemplate(2, BookEditComponent_div_36_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.pagesCount.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.pagesCount.errors.min);\n  }\n}\n\nfunction BookEditComponent_div_40_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Book price is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_40_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Price must be positive number \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookEditComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, BookEditComponent_div_40_div_1_Template, 2, 0, \"div\", 25);\n    i0.ɵɵtemplate(2, BookEditComponent_div_40_div_2_Template, 2, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.price.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.price.errors.min);\n  }\n}\n\nexport let BookEditComponent = /*#__PURE__*/(() => {\n  class BookEditComponent {\n    constructor(router, route, bookService) {\n      this.router = router;\n      this.route = route;\n      this.bookService = bookService;\n    }\n\n    ngOnInit() {\n      this.initForm();\n      this.id = this.route.snapshot.paramMap.get('bookId');\n      this.bookService.getSingleBook(this.id).subscribe(res => {\n        console.log(res);\n        this.editBookForm.patchValue(Object.assign({}, res.data));\n      });\n    }\n\n    initForm() {\n      this.editBookForm = new FormGroup({\n        'title': new FormControl('', [Validators.required]),\n        'author': new FormControl('', [Validators.required]),\n        'genre': new FormControl('', [Validators.required]),\n        'year': new FormControl('', [Validators.required]),\n        'description': new FormControl('', [Validators.required, Validators.minLength(10)]),\n        'cover': new FormControl('', [Validators.required, isUrlValidator]),\n        'isbn': new FormControl('', [Validators.required, isIsbnValidator]),\n        'pagesCount': new FormControl('', [Validators.required, Validators.min(0)]),\n        'price': new FormControl('', [Validators.required, Validators.min(0)])\n      });\n    }\n\n    onSubmit() {\n      this.bookService.editBook(this.id, this.editBookForm.value).subscribe(res => {\n        this.router.navigate([`/book/details/${res.data._id}`]);\n      });\n    }\n\n    get title() {\n      return this.editBookForm.get('title');\n    }\n\n    get author() {\n      return this.editBookForm.get('author');\n    }\n\n    get genre() {\n      return this.editBookForm.get('genre');\n    }\n\n    get year() {\n      return this.editBookForm.get('year');\n    }\n\n    get description() {\n      return this.editBookForm.get('description');\n    }\n\n    get cover() {\n      return this.editBookForm.get('cover');\n    }\n\n    get isbn() {\n      return this.editBookForm.get('isbn');\n    }\n\n    get pagesCount() {\n      return this.editBookForm.get('pagesCount');\n    }\n\n    get price() {\n      return this.editBookForm.get('price');\n    }\n\n  }\n\n  BookEditComponent.ɵfac = function BookEditComponent_Factory(t) {\n    return new (t || BookEditComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BookService));\n  };\n\n  BookEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookEditComponent,\n    selectors: [[\"app-book-edit\"]],\n    decls: 42,\n    vars: 11,\n    consts: [[1, \"form\", \"edit-book-form\"], [3, \"formGroup\", \"ngSubmit\"], [\"formDir\", \"ngForm\"], [1, \"form-field\"], [\"type\", \"text\", \"name\", \"title\", \"placeholder\", \"Book Title\", \"formControlName\", \"title\", 1, \"title\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-book\"], [\"class\", \"input-error\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"author\", \"placeholder\", \"Book Author\", \"formControlName\", \"author\", 1, \"author\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-user\"], [\"type\", \"text\", \"name\", \"genre\", \"placeholder\", \"Book Genre\", \"formControlName\", \"genre\", 1, \"genre\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-clipboard\"], [\"type\", \"number\", \"name\", \"year\", \"placeholder\", \"Book Relase Year\", \"formControlName\", \"year\", \"step\", \"1\", 1, \"year\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-sign-in-alt\"], [\"name\", \"description\", \"placeholder\", \"Book description\", \"formControlName\", \"description\", \"cols\", \"30\", \"rows\", \"10\", 1, \"description\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-pen\"], [\"type\", \"url\", \"name\", \"cover\", \"placeholder\", \"Book Cover\", \"formControlName\", \"cover\", 1, \"cover\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-book-open\"], [\"type\", \"text\", \"name\", \"isbn\", \"placeholder\", \"Book ISBN\", \"formControlName\", \"isbn\", 1, \"isbn\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fas\", \"fa-barcode\"], [\"type\", \"number\", \"name\", \"pagesCount\", \"placeholder\", \"Book Pages Count\", \"formControlName\", \"pagesCount\", \"step\", \"1\", 1, \"pagesCount\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-file-alt\"], [\"type\", \"number\", \"name\", \"price\", \"placeholder\", \"Book Price\", \"formControlName\", \"price\", \"step\", \"0.1\", 1, \"price\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-dollar-sign\"], [\"type\", \"submit\", \"value\", \"Submit Book\", 1, \"submit\", 3, \"disabled\"], [1, \"input-error\"], [4, \"ngIf\"]],\n    template: function BookEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"form\", 1, 2);\n        i0.ɵɵlistener(\"ngSubmit\", function BookEditComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(3, \"h1\");\n        i0.ɵɵtext(4, \"Edit Book\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelement(6, \"input\", 4);\n        i0.ɵɵelement(7, \"i\", 5);\n        i0.ɵɵtemplate(8, BookEditComponent_div_8_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 3);\n        i0.ɵɵelement(10, \"input\", 7);\n        i0.ɵɵelement(11, \"i\", 8);\n        i0.ɵɵtemplate(12, BookEditComponent_div_12_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 3);\n        i0.ɵɵelement(14, \"input\", 9);\n        i0.ɵɵelement(15, \"i\", 10);\n        i0.ɵɵtemplate(16, BookEditComponent_div_16_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 3);\n        i0.ɵɵelement(18, \"input\", 11);\n        i0.ɵɵelement(19, \"i\", 12);\n        i0.ɵɵtemplate(20, BookEditComponent_div_20_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 3);\n        i0.ɵɵelement(22, \"textarea\", 13);\n        i0.ɵɵelement(23, \"i\", 14);\n        i0.ɵɵtemplate(24, BookEditComponent_div_24_Template, 2, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 3);\n        i0.ɵɵelement(26, \"input\", 15);\n        i0.ɵɵelement(27, \"i\", 16);\n        i0.ɵɵtemplate(28, BookEditComponent_div_28_Template, 3, 2, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 3);\n        i0.ɵɵelement(30, \"input\", 17);\n        i0.ɵɵelement(31, \"i\", 18);\n        i0.ɵɵtemplate(32, BookEditComponent_div_32_Template, 3, 2, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 3);\n        i0.ɵɵelement(34, \"input\", 19);\n        i0.ɵɵelement(35, \"i\", 20);\n        i0.ɵɵtemplate(36, BookEditComponent_div_36_Template, 3, 2, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 3);\n        i0.ɵɵelement(38, \"input\", 21);\n        i0.ɵɵelement(39, \"i\", 22);\n        i0.ɵɵtemplate(40, BookEditComponent_div_40_Template, 3, 2, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"input\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.editBookForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.title.invalid && (ctx.title.dirty || ctx.title.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.author.invalid && (ctx.author.dirty || ctx.author.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.genre.invalid && (ctx.genre.dirty || ctx.genre.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.year.invalid && (ctx.year.dirty || ctx.year.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.description.invalid && (ctx.description.dirty || ctx.description.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.cover.invalid && (ctx.cover.dirty || ctx.cover.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.isbn.invalid && (ctx.isbn.dirty || ctx.isbn.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.pagesCount.invalid && (ctx.pagesCount.dirty || ctx.pagesCount.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.price.invalid && (ctx.price.dirty || ctx.price.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.editBookForm.invalid);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i4.NgIf, i3.NumberValueAccessor],\n    styles: [\"\"]\n  });\n  return BookEditComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}