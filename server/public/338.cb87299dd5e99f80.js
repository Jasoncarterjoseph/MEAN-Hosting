(self.webpackChunkonline_book_store=self.webpackChunkonline_book_store||[]).push([[338],{9338:(k,h,l)=>{"use strict";l.r(h),l.d(h,{BookModule:()=>_t});var u=l(9808),a=l(2382),e=l(4893);function A(n,o){if(1&n){var t=e.EpF();e.TgZ(0,"a",11),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(3),e.MAs(1).previous()})("click",function(){return e.CHM(t),e.oxw(3),e.MAs(1).previous()}),e._uU(1),e.TgZ(2,"span",12),e._uU(3),e.qZA(),e.qZA()}if(2&n){var i=e.oxw(3);e.uIk("aria-label",i.previousLabel+" "+i.screenReaderPageLabel),e.xp6(1),e.hij(" ",i.previousLabel," "),e.xp6(2),e.Oqu(i.screenReaderPageLabel)}}function f(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.TgZ(2,"span",12),e._uU(3),e.qZA(),e.qZA()),2&n){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.previousLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function C(n,o){if(1&n&&(e.TgZ(0,"li",8),e.YNc(1,A,4,3,"a",9),e.YNc(2,f,4,2,"span",10),e.qZA()),2&n){e.oxw(2);var t=e.MAs(1);e.ekj("disabled",t.isFirstPage()),e.xp6(1),e.Q6J("ngIf",1<t.getCurrent()),e.xp6(1),e.Q6J("ngIf",t.isFirstPage())}}function x(n,o){if(1&n){var t=e.EpF();e.TgZ(0,"a",11),e.NdJ("keyup.enter",function(){e.CHM(t);var c=e.oxw().$implicit;return e.oxw(2),e.MAs(1).setCurrent(c.value)})("click",function(){e.CHM(t);var c=e.oxw().$implicit;return e.oxw(2),e.MAs(1).setCurrent(c.value)}),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.qZA()}if(2&n){var i=e.oxw().$implicit,r=e.oxw(2);e.xp6(2),e.hij("",r.screenReaderPageLabel," "),e.xp6(2),e.Oqu("..."===i.label?i.label:e.xi3(5,2,i.label,""))}}function J(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"span",12),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.BQk()),2&n){var t=e.oxw().$implicit,i=e.oxw(2);e.xp6(2),e.hij("",i.screenReaderCurrentLabel," "),e.xp6(2),e.Oqu("..."===t.label?t.label:e.xi3(5,2,t.label,""))}}function F(n,o){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,x,6,5,"a",9),e.YNc(2,J,6,5,"ng-container",10),e.qZA()),2&n){var t=o.$implicit;e.oxw(2);var i=e.MAs(1);e.ekj("current",i.getCurrent()===t.value)("ellipsis","..."===t.label),e.xp6(1),e.Q6J("ngIf",i.getCurrent()!==t.value),e.xp6(1),e.Q6J("ngIf",i.getCurrent()===t.value)}}function R(n,o){if(1&n){var t=e.EpF();e.TgZ(0,"a",11),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw(3),e.MAs(1).next()})("click",function(){return e.CHM(t),e.oxw(3),e.MAs(1).next()}),e._uU(1),e.TgZ(2,"span",12),e._uU(3),e.qZA(),e.qZA()}if(2&n){var i=e.oxw(3);e.uIk("aria-label",i.nextLabel+" "+i.screenReaderPageLabel),e.xp6(1),e.hij(" ",i.nextLabel," "),e.xp6(2),e.Oqu(i.screenReaderPageLabel)}}function D(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.TgZ(2,"span",12),e._uU(3),e.qZA(),e.qZA()),2&n){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.nextLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function Y(n,o){if(1&n&&(e.TgZ(0,"li",13),e.YNc(1,R,4,3,"a",9),e.YNc(2,D,4,2,"span",10),e.qZA()),2&n){e.oxw(2);var t=e.MAs(1);e.ekj("disabled",t.isLastPage()),e.xp6(1),e.Q6J("ngIf",!t.isLastPage()),e.xp6(1),e.Q6J("ngIf",t.isLastPage())}}function O(n,o){if(1&n&&(e.TgZ(0,"ul",3),e.YNc(1,C,3,4,"li",4),e.TgZ(2,"li",5),e._uU(3),e.qZA(),e.YNc(4,F,3,6,"li",6),e.YNc(5,Y,3,4,"li",7),e.qZA()),2&n){var t=e.oxw(),i=e.MAs(1);e.ekj("responsive",t.responsive),e.uIk("aria-label",t.screenReaderPaginationLabel),e.xp6(1),e.Q6J("ngIf",t.directionLinks),e.xp6(2),e.AsE(" ",i.getCurrent()," / ",i.getLastPage()," "),e.xp6(1),e.Q6J("ngForOf",i.pages)("ngForTrackBy",t.trackByIndex),e.xp6(1),e.Q6J("ngIf",t.directionLinks)}}var Z=function(){function n(){this.change=new e.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return n.prototype.defaultId=function(){return this.DEFAULT_ID},n.prototype.register=function(o){return null==o.id&&(o.id=this.DEFAULT_ID),this.instances[o.id]?this.updateInstance(o):(this.instances[o.id]=o,!0)},n.prototype.updateInstance=function(o){var t=!1;for(var i in this.instances[o.id])o[i]!==this.instances[o.id][i]&&(this.instances[o.id][i]=o[i],t=!0);return t},n.prototype.getCurrentPage=function(o){if(this.instances[o])return this.instances[o].currentPage},n.prototype.setCurrentPage=function(o,t){if(this.instances[o]){var i=this.instances[o];t<=Math.ceil(i.totalItems/i.itemsPerPage)&&1<=t&&(this.instances[o].currentPage=t,this.change.emit(o))}},n.prototype.setTotalItems=function(o,t){this.instances[o]&&0<=t&&(this.instances[o].totalItems=t,this.change.emit(o))},n.prototype.setItemsPerPage=function(o,t){this.instances[o]&&(this.instances[o].itemsPerPage=t,this.change.emit(o))},n.prototype.getInstance=function(o){return void 0===o&&(o=this.DEFAULT_ID),this.instances[o]?this.clone(this.instances[o]):{}},n.prototype.clone=function(o){var t={};for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);return t},n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:function(o){return n.\u0275fac(o)}}),n}(),E=function(n,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,o)},j=Number.MAX_SAFE_INTEGER,H=function(){function n(o){this.service=o,this.state={}}return n.prototype.transform=function(o,t){if(!(o instanceof Array)){var i=t.id||this.service.defaultId();return this.state[i]?this.state[i].slice:o}var p,_,r=t.totalItems&&t.totalItems!==o.length,s=this.createInstance(o,t),c=s.id,b=s.itemsPerPage,B=this.service.register(s);if(!r&&o instanceof Array){if(this.stateIsIdentical(c,o,p=(s.currentPage-1)*(b=+b||j),_=p+b))return this.state[c].slice;var v=o.slice(p,_);return this.saveState(c,o,v,p,_),this.service.change.emit(c),v}return B&&this.service.change.emit(c),this.saveState(c,o,o,p,_),o},n.prototype.createInstance=function(o,t){return this.checkConfig(t),{id:null!=t.id?t.id:this.service.defaultId(),itemsPerPage:+t.itemsPerPage||0,currentPage:+t.currentPage||1,totalItems:+t.totalItems||o.length}},n.prototype.checkConfig=function(o){var i=["itemsPerPage","currentPage"].filter(function(r){return!(r in o)});if(0<i.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+i.join(", "))},n.prototype.saveState=function(o,t,i,r,s){this.state[o]={collection:t,size:t.length,slice:i,start:r,end:s}},n.prototype.stateIsIdentical=function(o,t,i,r){var s=this.state[o];return!!s&&!(s.size!==t.length||s.start!==i||s.end!==r)&&s.slice.every(function(p,_){return p===t[i+_]})},n=function(n,o,t,i){var c,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,o,t,i);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(s=(r<3?c(s):r>3?c(o,t,s):c(o,t))||s);return r>3&&s&&Object.defineProperty(o,t,s),s}([E("design:paramtypes",[Z])],n),n.\u0275fac=function(t){return new(t||n)(e.Y36(Z,16))},n.\u0275pipe=e.Yjl({name:"paginate",type:n,pure:!1}),n}(),m=function(n,o,t,i){var c,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,o,t,i);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(s=(r<3?c(s):r>3?c(o,t,s):c(o,t))||s);return r>3&&s&&Object.defineProperty(o,t,s),s},d=function(n,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,o)};function P(n){return!!n&&"false"!==n}var z=function(){function n(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new e.vpe,this.pageBoundsCorrection=new e.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(n.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(o){this._directionLinks=P(o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoHide",{get:function(){return this._autoHide},set:function(o){this._autoHide=P(o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"responsive",{get:function(){return this._responsive},set:function(o){this._responsive=P(o)},enumerable:!0,configurable:!0}),n.prototype.trackByIndex=function(o){return o},m([(0,e.IIB)(),d("design:type",String)],n.prototype,"id",void 0),m([(0,e.IIB)(),d("design:type",Number)],n.prototype,"maxSize",void 0),m([(0,e.IIB)(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],n.prototype,"directionLinks",null),m([(0,e.IIB)(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],n.prototype,"autoHide",null),m([(0,e.IIB)(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],n.prototype,"responsive",null),m([(0,e.IIB)(),d("design:type",String)],n.prototype,"previousLabel",void 0),m([(0,e.IIB)(),d("design:type",String)],n.prototype,"nextLabel",void 0),m([(0,e.IIB)(),d("design:type",String)],n.prototype,"screenReaderPaginationLabel",void 0),m([(0,e.IIB)(),d("design:type",String)],n.prototype,"screenReaderPageLabel",void 0),m([(0,e.IIB)(),d("design:type",String)],n.prototype,"screenReaderCurrentLabel",void 0),m([(0,e.r_U)(),d("design:type",e.vpe)],n.prototype,"pageChange",void 0),m([(0,e.r_U)(),d("design:type",e.vpe)],n.prototype,"pageBoundsCorrection",void 0),n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{maxSize:"maxSize",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:3,vars:3,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],[4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],[1,"pagination-next"]],template:function(t,i){if(1&t&&(e.TgZ(0,"pagination-template",0,1),e.NdJ("pageChange",function(c){return i.pageChange.emit(c)})("pageBoundsCorrection",function(c){return i.pageBoundsCorrection.emit(c)}),e.YNc(2,O,6,9,"ul",2),e.qZA()),2&t){var r=e.MAs(1);e.Q6J("id",i.id)("maxSize",i.maxSize),e.xp6(2),e.Q6J("ngIf",!(i.autoHide&&r.pages.length<=1))}},directives:function(){return[G,u.O5,u.sg]},pipes:function(){return[u.JJ]},styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],encapsulation:2,changeDetection:0}),n}(),T=function(n,o,t,i){var c,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,o,t,i);else for(var p=n.length-1;p>=0;p--)(c=n[p])&&(s=(r<3?c(s):r>3?c(o,t,s):c(o,t))||s);return r>3&&s&&Object.defineProperty(o,t,s),s},I=function(n,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,o)},G=function(){function n(o,t){var i=this;this.service=o,this.changeDetectorRef=t,this.maxSize=7,this.pageChange=new e.vpe,this.pageBoundsCorrection=new e.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(function(r){i.id===r&&(i.updatePageLinks(),i.changeDetectorRef.markForCheck(),i.changeDetectorRef.detectChanges())})}return n.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},n.prototype.ngOnChanges=function(o){this.updatePageLinks()},n.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},n.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},n.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},n.prototype.isFirstPage=function(){return 1===this.getCurrent()},n.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},n.prototype.setCurrent=function(o){this.pageChange.emit(o)},n.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},n.prototype.getLastPage=function(){var o=this.service.getInstance(this.id);return o.totalItems<1?1:Math.ceil(o.totalItems/o.itemsPerPage)},n.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},n.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},n.prototype.updatePageLinks=function(){var o=this,t=this.service.getInstance(this.id),i=this.outOfBoundCorrection(t);i!==t.currentPage?setTimeout(function(){o.pageBoundsCorrection.emit(i),o.pages=o.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,o.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)},n.prototype.outOfBoundCorrection=function(o){var t=Math.ceil(o.totalItems/o.itemsPerPage);return t<o.currentPage&&0<t?t:o.currentPage<1?1:o.currentPage},n.prototype.createPageArray=function(o,t,i,r){r=+r;for(var s=[],c=Math.max(Math.ceil(i/t),1),p=Math.ceil(r/2),_=o<=p,b=c-p<o,B=!_&&!b,w=r<c,v=1;v<=c&&v<=r;){var L=this.calculatePageNumber(v,o,r,c);s.push({label:w&&(2===v&&(B||b)||v===r-1&&(B||_))?"...":L,value:L}),v++}return s},n.prototype.calculatePageNumber=function(o,t,i,r){var s=Math.ceil(i/2);return o===i?r:1===o?o:i<r?r-s<t?r-i+o:s<t?t-s+o:o:o},T([(0,e.IIB)(),I("design:type",String)],n.prototype,"id",void 0),T([(0,e.IIB)(),I("design:type",Number)],n.prototype,"maxSize",void 0),T([(0,e.r_U)(),I("design:type",e.vpe)],n.prototype,"pageChange",void 0),T([(0,e.r_U)(),I("design:type",e.vpe)],n.prototype,"pageBoundsCorrection",void 0),(n=T([I("design:paramtypes",[Z,e.sBO])],n)).\u0275fac=function(t){return new(t||n)(e.Y36(Z),e.Y36(e.sBO))},n.\u0275dir=e.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{maxSize:"maxSize",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[e.TTD]}),n}(),$=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Z],imports:[[u.ez]]}),n}(),g=l(2517),q=l(1094);let N=(()=>{class n{constructor(t,i){this.router=t,this.helperService=i}canLoad(t){return this.isAdmin()}canActivate(t,i){return this.isAdmin()}isAdmin(){return!!this.helperService.isAdmin()||(this.router.navigate(["/user/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.F0),e.LFG(q.W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=l(4002);const V=l(7457),S=n=>V.Validate(n.value)?null:{isIsbn:!1};var y=l(651);function X(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book title is required "),e.qZA())}function W(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,X,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}function K(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book author is required "),e.qZA())}function ee(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,K,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.author.errors.required)}}function te(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book genre is required "),e.qZA())}function ne(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,te,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.genre.errors.required)}}function oe(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book release year is required "),e.qZA())}function ie(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,oe,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.year.errors.required)}}function re(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book description must be more than 10 symbols long "),e.qZA())}function ae(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,re,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.description.errors.required||t.description.errors.minlength)}}function se(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book cover is required "),e.qZA())}function ce(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book cover must be a valid Url "),e.qZA())}function pe(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,se,2,0,"div",25),e.YNc(2,ce,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.cover.errors.required),e.xp6(1),e.Q6J("ngIf",!t.cover.errors.isUrl)}}function le(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book isbn is required "),e.qZA())}function ue(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Please specify a valid ISBN "),e.qZA())}function de(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,le,2,0,"div",25),e.YNc(2,ue,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isbn.errors.required),e.xp6(1),e.Q6J("ngIf",!t.isbn.errors.isIsbn)}}function ge(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book pages count is required "),e.qZA())}function me(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Pages count must be positive number "),e.qZA())}function _e(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,ge,2,0,"div",25),e.YNc(2,me,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.pagesCount.errors.required),e.xp6(1),e.Q6J("ngIf",t.pagesCount.errors.min)}}function fe(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book price is required "),e.qZA())}function ve(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Price must be positive number "),e.qZA())}function he(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,fe,2,0,"div",25),e.YNc(2,ve,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.price.errors.required),e.xp6(1),e.Q6J("ngIf",t.price.errors.min)}}let be=(()=>{class n{constructor(t,i){this.router=t,this.bookService=i}ngOnInit(){this.createBookForm=new a.cw({title:new a.NI("",[a.kI.required]),author:new a.NI("",[a.kI.required]),genre:new a.NI("",[a.kI.required]),year:new a.NI("",[a.kI.required]),description:new a.NI("",[a.kI.required,a.kI.minLength(10)]),cover:new a.NI("",[a.kI.required,U.w]),isbn:new a.NI("",[a.kI.required,S]),pagesCount:new a.NI("",[a.kI.required,a.kI.min(0)]),price:new a.NI("",[a.kI.required,a.kI.min(0)])})}onSubmit(){this.bookService.createBook(this.createBookForm.value).subscribe(t=>{this.router.navigate([`/book/details/${t.data._id}`])})}get title(){return this.createBookForm.get("title")}get author(){return this.createBookForm.get("author")}get genre(){return this.createBookForm.get("genre")}get year(){return this.createBookForm.get("year")}get description(){return this.createBookForm.get("description")}get cover(){return this.createBookForm.get("cover")}get isbn(){return this.createBookForm.get("isbn")}get pagesCount(){return this.createBookForm.get("pagesCount")}get price(){return this.createBookForm.get("price")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(y.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-book-create"]],decls:42,vars:11,consts:[[1,"form","create-book-form"],[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,"form-field"],["type","text","name","title","placeholder","Book Title","formControlName","title",1,"title"],["aria-hidden","true",1,"fas","fa-book"],["class","input-error",4,"ngIf"],["type","text","name","author","placeholder","Book Author","formControlName","author",1,"author"],["aria-hidden","true",1,"fas","fa-user"],["type","text","name","genre","placeholder","Book Genre","formControlName","genre",1,"genre"],["aria-hidden","true",1,"fas","fa-clipboard"],["type","number","name","year","placeholder","Book Relase Year","formControlName","year","step","1",1,"year"],["aria-hidden","true",1,"fas","fa-sign-in-alt"],["name","description","placeholder","Book description","formControlName","description","cols","30","rows","10",1,"description"],["aria-hidden","true",1,"fas","fa-pen"],["type","url","name","cover","placeholder","Book Cover","formControlName","cover",1,"cover"],["aria-hidden","true",1,"fas","fa-book-open"],["type","text","name","isbn","placeholder","Book ISBN","formControlName","isbn",1,"isbn"],["aria-hidden","true",1,"fas","fas","fa-barcode"],["type","number","name","pagesCount","placeholder","Book Pages Count","formControlName","pagesCount","step","1",1,"pagesCount"],["aria-hidden","true",1,"fas","fa-file-alt"],["type","number","name","price","placeholder","Book Price","formControlName","price","step","0.1",1,"price"],["aria-hidden","true",1,"fas","fa-dollar-sign"],["type","submit","value","Create Book",1,"submit",3,"disabled"],[1,"input-error"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1,2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(3,"h1"),e._uU(4,"Add New Book"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"input",4),e._UZ(7,"i",5),e.YNc(8,W,2,1,"div",6),e.qZA(),e.TgZ(9,"div",3),e._UZ(10,"input",7),e._UZ(11,"i",8),e.YNc(12,ee,2,1,"div",6),e.qZA(),e.TgZ(13,"div",3),e._UZ(14,"input",9),e._UZ(15,"i",10),e.YNc(16,ne,2,1,"div",6),e.qZA(),e.TgZ(17,"div",3),e._UZ(18,"input",11),e._UZ(19,"i",12),e.YNc(20,ie,2,1,"div",6),e.qZA(),e.TgZ(21,"div",3),e._UZ(22,"textarea",13),e._UZ(23,"i",14),e.YNc(24,ae,2,1,"div",6),e.qZA(),e.TgZ(25,"div",3),e._UZ(26,"input",15),e._UZ(27,"i",16),e.YNc(28,pe,3,2,"div",6),e.qZA(),e.TgZ(29,"div",3),e._UZ(30,"input",17),e._UZ(31,"i",18),e.YNc(32,de,3,2,"div",6),e.qZA(),e.TgZ(33,"div",3),e._UZ(34,"input",19),e._UZ(35,"i",20),e.YNc(36,_e,3,2,"div",6),e.qZA(),e.TgZ(37,"div",3),e._UZ(38,"input",21),e._UZ(39,"i",22),e.YNc(40,he,3,2,"div",6),e.qZA(),e._UZ(41,"input",23),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.createBookForm),e.xp6(7),e.Q6J("ngIf",i.title.invalid&&(i.title.dirty||i.title.touched)),e.xp6(4),e.Q6J("ngIf",i.author.invalid&&(i.author.dirty||i.author.touched)),e.xp6(4),e.Q6J("ngIf",i.genre.invalid&&(i.genre.dirty||i.genre.touched)),e.xp6(4),e.Q6J("ngIf",i.year.invalid&&(i.year.dirty||i.year.touched)),e.xp6(4),e.Q6J("ngIf",i.description.invalid&&(i.description.dirty||i.description.touched)),e.xp6(4),e.Q6J("ngIf",i.cover.invalid&&(i.cover.dirty||i.cover.touched)),e.xp6(4),e.Q6J("ngIf",i.isbn.invalid&&(i.isbn.dirty||i.isbn.touched)),e.xp6(4),e.Q6J("ngIf",i.pagesCount.invalid&&(i.pagesCount.dirty||i.pagesCount.touched)),e.xp6(4),e.Q6J("ngIf",i.price.invalid&&(i.price.dirty||i.price.touched)),e.xp6(1),e.Q6J("disabled",i.createBookForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,u.O5,a.wV],styles:[""]}),n})(),ke=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.bookService=r}ngOnInit(){this.initForm(),this.id=this.route.snapshot.paramMap.get("bookId"),this.bookService.getSingleBook(this.id).subscribe(t=>{this.deleteBookForm.patchValue(Object.assign({},t.data))})}initForm(){this.deleteBookForm=new a.cw({title:new a.NI("",[a.kI.required]),author:new a.NI("",[a.kI.required]),genre:new a.NI("",[a.kI.required]),description:new a.NI("",[a.kI.required,a.kI.minLength(10)]),price:new a.NI("",[a.kI.required,a.kI.min(0)])})}onSubmit(){this.bookService.deleteBook(this.id).subscribe(()=>{this.router.navigate(["/home"])})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(y.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-book-delete"]],decls:21,vars:1,consts:[[1,"form","delete-book-form"],[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,"form-field"],["type","text","name","title","placeholder","Book Title","formControlName","title","disabled","",1,"title"],["aria-hidden","true",1,"fas","fa-book"],["type","text","name","author","placeholder","Book Author","formControlName","author","disabled","",1,"author"],["aria-hidden","true",1,"fas","fa-user"],["type","text","name","genre","placeholder","Book Genre","formControlName","genre","disabled","",1,"genre"],["aria-hidden","true",1,"fas","fa-clipboard"],["name","description","placeholder","Book description","formControlName","description","cols","30","rows","3","disabled","",1,"description"],["aria-hidden","true",1,"fas","fa-pen"],["type","number","name","price","placeholder","Book Price","formControlName","price","step","0.1","disabled","",1,"price"],["aria-hidden","true",1,"fas","fa-dollar-sign"],["type","submit","value","Confirm Delete",1,"submit","delete-book"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1,2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(3,"h1"),e._uU(4,"Delete Book"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"input",4),e._UZ(7,"i",5),e.qZA(),e.TgZ(8,"div",3),e._UZ(9,"input",6),e._UZ(10,"i",7),e.qZA(),e.TgZ(11,"div",3),e._UZ(12,"input",8),e._UZ(13,"i",9),e.qZA(),e.TgZ(14,"div",3),e._UZ(15,"textarea",10),e._UZ(16,"i",11),e.qZA(),e.TgZ(17,"div",3),e._UZ(18,"input",12),e._UZ(19,"i",13),e.qZA(),e._UZ(20,"input",14),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.deleteBookForm))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV],styles:[""]}),n})();var Ce=l(4128),xe=l(5338),Ze=l(2551);let Ie=(()=>{class n{transform(t,i){return function Te(n){let o=(new Date).getTime()-new Date(n).getTime();return o=Math.floor(o/6e4),o<1?"less than a minute":o<60?o+" minute"+t(o):(o=Math.floor(o/60),o<24?o+" hour"+t(o):(o=Math.floor(o/24),o<30?o+" day"+t(o):(o=Math.floor(o/30),o<12?o+" month"+t(o):(o=Math.floor(o/12),o+" year"+t(o)))));function t(i){return 1!==i?"s":""}}(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"commentTime",type:n,pure:!0}),n})();function ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.TgZ(2,"a",12),e._UZ(3,"img",13),e.qZA(),e.qZA(),e.TgZ(4,"div",14),e.TgZ(5,"h6",15),e.TgZ(6,"a",12),e._uU(7),e.qZA(),e._uU(8),e.ALo(9,"commentTime"),e.qZA(),e.TgZ(10,"div",16),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(),p=e.MAs(14);return c.openFormModal(p,s._id)}),e._uU(14,"Edit Comment "),e.qZA(),e.TgZ(15,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(),p=e.MAs(16);return c.openRemoveModal(p,s._id)}),e._uU(16,"Delete Comment "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.xp6(2),e.MGl("routerLink","/user/profile/",t.user.username,""),e.xp6(1),e.s9C("src",t.user.avatar,e.LSH),e.xp6(3),e.MGl("routerLink","/user/profile/",t.user.username,""),e.xp6(1),e.hij("by ",t.user.username,""),e.xp6(1),e.hij(" ",e.lcZ(9,8,t.creationDate)," ago "),e.xp6(4),e.Oqu(t.content),e.xp6(1),e.Q6J("hidden",!i.isAdmin&&t.user._id!==i.userId),e.xp6(2),e.Q6J("hidden",!i.isAdmin&&t.user._id!==i.userId)}}function Be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"h4",20),e._uU(2),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().commentModalRef.hide()}),e.TgZ(4,"span",22),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"form",24,25),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(9,"div",26),e._UZ(10,"textarea",27),e.TgZ(11,"div",28),e.TgZ(12,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().commentModalRef.hide()}),e._uU(13,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",t.action," Comment"),e.xp6(5),e.Q6J("formGroup",t.commentForm),e.xp6(5),e.Q6J("disabled",t.commentForm.invalid)}}function Ae(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"p"),e._uU(2,"Do you really want to delete your comment?"),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeComment()}),e._uU(4,"Yes"),e.qZA(),e.TgZ(5,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeModalRef.hide()}),e._uU(6,"No"),e.qZA(),e.qZA()}}let Pe=(()=>{class n{constructor(t,i){this.commentService=t,this.modalService=i,this.comments=[]}ngOnInit(){this.commentForm=new a.cw({content:new a.NI("",a.kI.required)}),this.commentService.getComments(this.bookId,this.comments.length.toString()).subscribe(t=>{this.comments=t.data})}openFormModal(t,i){if(i){let r="";this.isFromEdit=!0,this.lastEditId=i;for(const s of this.comments)if(s._id===i){r=s.content;break}this.action="Edit",this.commentForm.patchValue({content:r})}else this.action="Create",this.isFromEdit=!1,this.commentForm.patchValue({content:""});this.commentModalRef=this.modalService.show(t,{class:"myModal"})}openRemoveModal(t,i){this.lastDeleteId=i,this.removeModalRef=this.modalService.show(t,{class:"myModal modal-sm"})}onSubmit(){this.isFromEdit?this.modifyComment():this.createComment()}loadMoreComments(){this.commentService.getComments(this.bookId,this.comments.length.toString()).subscribe(t=>{0!==t.data.length&&this.comments.splice(this.comments.length,0,...t.data)})}createComment(){this.commentService.addComment(this.bookId,this.commentForm.value).subscribe(t=>{this.comments.unshift(t.data)}),this.commentForm.reset()}modifyComment(){const t=this.commentForm.value.content;this.commentService.editComment(this.lastEditId,this.commentForm.value).subscribe(()=>{for(const i of this.comments)if(i._id===this.lastEditId){i.content=t;break}}),this.commentForm.reset()}removeComment(){this.removeModalRef.hide();const t=this.lastDeleteId;this.commentService.deleteComment(this.lastDeleteId).subscribe(()=>{this.comments=this.comments.filter(i=>i._id!==t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(xe.O),e.Y36(Ze.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comment"]],inputs:{bookId:"bookId",isLogged:"isLogged",isAdmin:"isAdmin",userId:"userId"},decls:17,vars:2,consts:[[1,"row"],[1,"comments","col-md-9"],[1,"mb-2"],[1,"row","pt-2"],[1,"col-12"],["type","button",1,"btn","btn-primary",3,"hidden","click"],["class","comment mb-2 row",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],["commentFormTemplate",""],["remove",""],[1,"comment","mb-2","row"],[1,"comment-avatar","col-md-1","col-sm-2","text-center","pr-1"],[3,"routerLink"],["alt","avatar",1,"mx-auto","rounded-circle","img-fluid",3,"src"],[1,"comment-content","col-md-11","col-sm-10"],[1,"small","comment-meta"],[1,"comment-body"],["type","button",1,"btn","btn-primary","btn-sm",3,"hidden","click"],["type","button",1,"btn","btn-danger","btn-sm",3,"hidden","click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,"form-group"],["name","content","cols","30","rows","10","formControlName","content",1,"form-control"],[1,"test"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3,"Comments"),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(r);const c=e.MAs(14);return i.openFormModal(c)}),e._uU(7,"Add Comment "),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,ye,17,10,"div",6),e.TgZ(9,"div",3),e.TgZ(10,"div",4),e.TgZ(11,"button",7),e.NdJ("click",function(){return i.loadMoreComments()}),e._uU(12,"Load More..."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,Be,14,3,"ng-template",null,8,e.W1O),e.YNc(15,Ae,7,0,"ng-template",null,9,e.W1O)}2&t&&(e.xp6(6),e.Q6J("hidden",!i.isLogged),e.xp6(2),e.Q6J("ngForOf",i.comments))},directives:[u.sg,g.yS,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],pipes:[Ie],styles:[".test[_ngcontent-%COMP%]{margin-top:10px}.comment[_ngcontent-%COMP%]{padding:20px;background-color:#e4ddf4;border-radius:10px}.col-12[_ngcontent-%COMP%]{margin-bottom:10px}.col-md-9[_ngcontent-%COMP%]{text-align:center;margin:0 auto}.mb-2[_ngcontent-%COMP%]{margin-bottom:10px}.comment-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:left;margin-left:10px}.comment-meta[_ngcontent-%COMP%]{text-align:left}.comment-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}"]}),n})();function qe(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"..."),e.qZA())}function Ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).buyBook()}),e._uU(1,"Buy Book"),e.qZA(),e.TgZ(2,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addToFavorites()}),e._uU(3,"Add to favourites"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.isBought),e.xp6(2),e.Q6J("disabled",t.isAdded)}}function we(n,o){if(1&n&&(e.TgZ(0,"div",14),e.TgZ(1,"a",15),e._uU(2,"Edit Book"),e.qZA(),e.TgZ(3,"a",16),e._uU(4,"Delete Book"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.MGl("routerLink","/book/edit/",t.book._id,""),e.xp6(2),e.MGl("routerLink","/book/delete/",t.book._id,"")}}function Me(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).login()}),e._uU(1,"Login to Buy, Rate and Comment"),e.qZA()}}const Ue=function(n){return{limitTextHeight:n}};function Se(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._UZ(2,"img",6),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"h3"),e._uU(5),e.qZA(),e.TgZ(6,"span",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().rateBook(1)})("mouseenter",function(){return e.CHM(t),e.oxw().calcRating(1)})("mouseleave",function(){return e.CHM(t),e.oxw().resetRating()}),e.qZA(),e.TgZ(7,"span",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().rateBook(2)})("mouseenter",function(){return e.CHM(t),e.oxw().calcRating(2)})("mouseleave",function(){return e.CHM(t),e.oxw().resetRating()}),e.qZA(),e.TgZ(8,"span",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().rateBook(3)})("mouseenter",function(){return e.CHM(t),e.oxw().calcRating(3)})("mouseleave",function(){return e.CHM(t),e.oxw().resetRating()}),e.qZA(),e.TgZ(9,"span",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().rateBook(4)})("mouseenter",function(){return e.CHM(t),e.oxw().calcRating(4)})("mouseleave",function(){return e.CHM(t),e.oxw().resetRating()}),e.qZA(),e.TgZ(10,"span",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().rateBook(5)})("mouseenter",function(){return e.CHM(t),e.oxw().calcRating(5)})("mouseleave",function(){return e.CHM(t),e.oxw().resetRating()}),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA(),e.TgZ(21,"p"),e._uU(22),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA(),e.TgZ(25,"p",9),e._uU(26),e.qZA(),e.TgZ(27,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().showText()}),e.YNc(28,qe,2,0,"span",11),e._uU(29),e.qZA(),e.TgZ(30,"h2"),e._uU(31),e.qZA(),e.YNc(32,Ne,4,2,"ng-template",1),e.YNc(33,we,5,2,"ng-template",1),e.YNc(34,Me,2,0,"ng-template",1),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.s9C("src",t.book.cover,e.LSH),e.xp6(3),e.Oqu(t.book.title),e.xp6(1),e.Gre("fa fa-star ",t.stars[0],""),e.xp6(1),e.Gre("fa fa-star ",t.stars[1],""),e.xp6(1),e.Gre("fa fa-star ",t.stars[2],""),e.xp6(1),e.Gre("fa fa-star ",t.stars[3],""),e.xp6(1),e.Gre("fa fa-star ",t.stars[4],""),e.xp6(2),e.hij("based on ",t.book.ratedCount," ratings"),e.xp6(2),e.hij("",t.book.comments.length," comments"),e.xp6(2),e.hij("Author: ",t.book.author,""),e.xp6(2),e.hij("Genre: ",t.book.genre,""),e.xp6(2),e.hij("Relsease Year: ",t.book.year,""),e.xp6(2),e.hij("ISBN: ",t.book.isbn,""),e.xp6(2),e.hij("Pages: ",t.book.pagesCount,""),e.xp6(1),e.Q6J("ngClass",e.VKq(32,Ue,t.isReadMore)),e.xp6(1),e.hij("Description: ",t.book.description,""),e.xp6(2),e.Q6J("ngIf",t.isReadMore),e.xp6(1),e.hij(" ",t.isReadMore?"Read More":"Read Less"," "),e.xp6(2),e.hij("Price:\u20b9",t.book.price,""),e.xp6(1),e.Q6J("ngIf",t.isLogged),e.xp6(1),e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngIf",!t.isLogged)}}function Le(n,o){if(1&n&&e._UZ(0,"app-comment",18),2&n){const t=e.oxw();e.Q6J("bookId",t.bookId)("isLogged",t.isLogged)("isAdmin",t.isAdmin)("userId",t.userId)}}let Je=(()=>{class n{constructor(t,i,r,s,c){this.router=t,this.route=i,this.bookService=r,this.cartService=s,this.helperService=c,this.stars=["","","","",""],this.isReadMore=!0}showText(){this.isReadMore=!this.isReadMore}ngOnInit(){this.bookId=this.route.snapshot.paramMap.get("bookId"),this.isLogged=this.helperService.isLoggedIn(),this.isAdmin=this.helperService.isAdmin(),this.userId=this.helperService.getProfile().id,this.bookService.getSingleBook(this.bookId).subscribe(t=>{this.book=t.data,this.calcRating(this.book.currentRating)})}buyBook(){this.cartService.addToCart(this.bookId).subscribe(()=>{this.helperService.cartStatus.next("add"),this.isBought=!0},()=>{this.isBought=!0})}addToFavorites(){this.bookService.addToFavourites(this.bookId).subscribe(()=>{this.isAdded=!0},()=>{this.isAdded=!0})}rateBook(t){this.isRated||(this.isRated=!0,this.bookService.rateBook(this.bookId,{rating:t}).subscribe(i=>{this.book.currentRating=i.data.currentRating,this.book.ratedCount++,this.calcRating(this.book.currentRating)}))}calcRating(t){this.stars=["","","","",""],t=Math.round(t);for(let i=0;i<t;i++)this.stars[i]="checked"}resetRating(){this.calcRating(this.book.currentRating)}login(){this.router.navigate(["/user/login"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(y.Z),e.Y36(Ce.N),e.Y36(q.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-book-details"]],decls:4,vars:3,consts:[["class","container-fluid  row book-details",4,"ngIf"],[3,"ngIf"],[1,"no-results",3,"hidden"],["src","https://i.imgur.com/KRVihMq.png","alt","no-item-found"],[1,"container-fluid","row","book-details"],[1,"col-md-4","d-flex","justify-content-center"],["alt","book-cover",3,"src"],[1,"col-md-7","book-info"],[3,"click","mouseenter","mouseleave"],[1,"book-description",3,"ngClass"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-secondary",3,"disabled","click"],["id","admin-panel"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"routerLink"],[1,"btn","btn-secondary",3,"click"],[3,"bookId","isLogged","isAdmin","userId"]],template:function(t,i){1&t&&(e.YNc(0,Se,35,34,"div",0),e.YNc(1,Le,1,4,"ng-template",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.qZA()),2&t&&(e.Q6J("ngIf",i.book),e.xp6(1),e.Q6J("ngIf",i.book),e.xp6(1),e.Q6J("hidden",i.book))},directives:[u.O5,u.mk,g.yS,Pe],styles:[".book-details[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;width:100%}.book-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;height:450px}.book-info[_ngcontent-%COMP%]{padding:30px;background-color:#e4ddf4;border-radius:15px}.book-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;margin-right:10px}.book-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 10px 10px 0}.book-description[_ngcontent-%COMP%]{text-align:justify}.book-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:50px auto;text-align:left}.checked[_ngcontent-%COMP%]{color:orange}#admin-panel[_ngcontent-%COMP%]{margin:0}.limitTextHeight[_ngcontent-%COMP%]{height:63px;overflow:hidden}@media screen and (max-width: 768px){.book-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:70px;text-align:left}.addmargin[_ngcontent-%COMP%]{margin:40px}}"]}),n})();function Fe(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book title is required "),e.qZA())}function Re(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Fe,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}function De(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book author is required "),e.qZA())}function Ye(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,De,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.author.errors.required)}}function Oe(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book genre is required "),e.qZA())}function Qe(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Oe,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.genre.errors.required)}}function Ee(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book release year is required "),e.qZA())}function je(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Ee,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.year.errors.required)}}function He(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book description must be more than 10 symbols long "),e.qZA())}function ze(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,He,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.description.errors.required||t.description.errors.minlength)}}function Ge(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book cover is required "),e.qZA())}function $e(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book cover must be a valid Url "),e.qZA())}function Ve(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Ge,2,0,"div",25),e.YNc(2,$e,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.cover.errors.required),e.xp6(1),e.Q6J("ngIf",!t.cover.errors.isUrl)}}function Xe(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book isbn is required "),e.qZA())}function We(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Please specify a valid ISBN "),e.qZA())}function Ke(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Xe,2,0,"div",25),e.YNc(2,We,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isbn.errors.required),e.xp6(1),e.Q6J("ngIf",!t.isbn.errors.isIsbn)}}function et(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book pages count is required "),e.qZA())}function tt(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Pages count must be positive number "),e.qZA())}function nt(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,et,2,0,"div",25),e.YNc(2,tt,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.pagesCount.errors.required),e.xp6(1),e.Q6J("ngIf",t.pagesCount.errors.min)}}function ot(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Book price is required "),e.qZA())}function it(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Price must be positive number "),e.qZA())}function rt(n,o){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,ot,2,0,"div",25),e.YNc(2,it,2,0,"div",25),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.price.errors.required),e.xp6(1),e.Q6J("ngIf",t.price.errors.min)}}let at=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.bookService=r}ngOnInit(){this.initForm(),this.id=this.route.snapshot.paramMap.get("bookId"),this.bookService.getSingleBook(this.id).subscribe(t=>{console.log(t),this.editBookForm.patchValue(Object.assign({},t.data))})}initForm(){this.editBookForm=new a.cw({title:new a.NI("",[a.kI.required]),author:new a.NI("",[a.kI.required]),genre:new a.NI("",[a.kI.required]),year:new a.NI("",[a.kI.required]),description:new a.NI("",[a.kI.required,a.kI.minLength(10)]),cover:new a.NI("",[a.kI.required,U.w]),isbn:new a.NI("",[a.kI.required,S]),pagesCount:new a.NI("",[a.kI.required,a.kI.min(0)]),price:new a.NI("",[a.kI.required,a.kI.min(0)])})}onSubmit(){this.bookService.editBook(this.id,this.editBookForm.value).subscribe(t=>{this.router.navigate([`/book/details/${t.data._id}`])})}get title(){return this.editBookForm.get("title")}get author(){return this.editBookForm.get("author")}get genre(){return this.editBookForm.get("genre")}get year(){return this.editBookForm.get("year")}get description(){return this.editBookForm.get("description")}get cover(){return this.editBookForm.get("cover")}get isbn(){return this.editBookForm.get("isbn")}get pagesCount(){return this.editBookForm.get("pagesCount")}get price(){return this.editBookForm.get("price")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(y.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-book-edit"]],decls:42,vars:11,consts:[[1,"form","edit-book-form"],[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,"form-field"],["type","text","name","title","placeholder","Book Title","formControlName","title",1,"title"],["aria-hidden","true",1,"fas","fa-book"],["class","input-error",4,"ngIf"],["type","text","name","author","placeholder","Book Author","formControlName","author",1,"author"],["aria-hidden","true",1,"fas","fa-user"],["type","text","name","genre","placeholder","Book Genre","formControlName","genre",1,"genre"],["aria-hidden","true",1,"fas","fa-clipboard"],["type","number","name","year","placeholder","Book Relase Year","formControlName","year","step","1",1,"year"],["aria-hidden","true",1,"fas","fa-sign-in-alt"],["name","description","placeholder","Book description","formControlName","description","cols","30","rows","10",1,"description"],["aria-hidden","true",1,"fas","fa-pen"],["type","url","name","cover","placeholder","Book Cover","formControlName","cover",1,"cover"],["aria-hidden","true",1,"fas","fa-book-open"],["type","text","name","isbn","placeholder","Book ISBN","formControlName","isbn",1,"isbn"],["aria-hidden","true",1,"fas","fas","fa-barcode"],["type","number","name","pagesCount","placeholder","Book Pages Count","formControlName","pagesCount","step","1",1,"pagesCount"],["aria-hidden","true",1,"fas","fa-file-alt"],["type","number","name","price","placeholder","Book Price","formControlName","price","step","0.1",1,"price"],["aria-hidden","true",1,"fas","fa-dollar-sign"],["type","submit","value","Submit Book",1,"submit",3,"disabled"],[1,"input-error"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1,2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(3,"h1"),e._uU(4,"Edit Book"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"input",4),e._UZ(7,"i",5),e.YNc(8,Re,2,1,"div",6),e.qZA(),e.TgZ(9,"div",3),e._UZ(10,"input",7),e._UZ(11,"i",8),e.YNc(12,Ye,2,1,"div",6),e.qZA(),e.TgZ(13,"div",3),e._UZ(14,"input",9),e._UZ(15,"i",10),e.YNc(16,Qe,2,1,"div",6),e.qZA(),e.TgZ(17,"div",3),e._UZ(18,"input",11),e._UZ(19,"i",12),e.YNc(20,je,2,1,"div",6),e.qZA(),e.TgZ(21,"div",3),e._UZ(22,"textarea",13),e._UZ(23,"i",14),e.YNc(24,ze,2,1,"div",6),e.qZA(),e.TgZ(25,"div",3),e._UZ(26,"input",15),e._UZ(27,"i",16),e.YNc(28,Ve,3,2,"div",6),e.qZA(),e.TgZ(29,"div",3),e._UZ(30,"input",17),e._UZ(31,"i",18),e.YNc(32,Ke,3,2,"div",6),e.qZA(),e.TgZ(33,"div",3),e._UZ(34,"input",19),e._UZ(35,"i",20),e.YNc(36,nt,3,2,"div",6),e.qZA(),e.TgZ(37,"div",3),e._UZ(38,"input",21),e._UZ(39,"i",22),e.YNc(40,rt,3,2,"div",6),e.qZA(),e._UZ(41,"input",23),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.editBookForm),e.xp6(7),e.Q6J("ngIf",i.title.invalid&&(i.title.dirty||i.title.touched)),e.xp6(4),e.Q6J("ngIf",i.author.invalid&&(i.author.dirty||i.author.touched)),e.xp6(4),e.Q6J("ngIf",i.genre.invalid&&(i.genre.dirty||i.genre.touched)),e.xp6(4),e.Q6J("ngIf",i.year.invalid&&(i.year.dirty||i.year.touched)),e.xp6(4),e.Q6J("ngIf",i.description.invalid&&(i.description.dirty||i.description.touched)),e.xp6(4),e.Q6J("ngIf",i.cover.invalid&&(i.cover.dirty||i.cover.touched)),e.xp6(4),e.Q6J("ngIf",i.isbn.invalid&&(i.isbn.dirty||i.isbn.touched)),e.xp6(4),e.Q6J("ngIf",i.pagesCount.invalid&&(i.pagesCount.dirty||i.pagesCount.touched)),e.xp6(4),e.Q6J("ngIf",i.price.invalid&&(i.price.dirty||i.price.touched)),e.xp6(1),e.Q6J("disabled",i.editBookForm.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,u.O5,a.wV],styles:[""]}),n})();var st=l(9190);function ct(n,o){1&n&&e._UZ(0,"app-book",7),2&n&&e.Q6J("book",o.$implicit)}function pt(n,o){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"img",9),e.qZA())}const lt=function(n,o,t){return{itemsPerPage:n,currentPage:o,totalItems:t}};function ut(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"pagination-controls",2),e.NdJ("pageChange",function(r){return e.CHM(t),e.oxw().pageChanged(r)}),e.qZA(),e.qZA(),e.TgZ(2,"div",3),e.YNc(3,ct,1,1,"app-book",4),e.ALo(4,"paginate"),e.qZA(),e.YNc(5,pt,2,0,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"pagination-controls",2),e.NdJ("pageChange",function(r){return e.CHM(t),e.oxw().pageChanged(r)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.s9C("maxSize",t.maxPages),e.xp6(2),e.Q6J("ngForOf",e.xi3(4,4,t.books,e.kEZ(7,lt,t.pageSize,t.currentPage,t.total))),e.xp6(2),e.Q6J("ngIf",0===t.books.length),e.xp6(2),e.s9C("maxSize",t.maxPages)}}const dt=[{path:"",redirectTo:"store/default",pathMatch:"full"},{path:"store/:query",component:(()=>{class n{constructor(t,i,r){this.route=t,this.bookSevice=i,this.helperService=r,this.pageSize=15,this.currentPage=1,this.total=30,this.maxPages=8}ngOnInit(){this.routeChangeSub$=this.route.params.subscribe(t=>{this.currentQuery=t.query,this.initRequest(this.currentQuery)}),this.querySub$=this.helperService.searchQuery.subscribe(()=>{this.currentPage=1})}ngOnDestroy(){this.routeChangeSub$.unsubscribe(),this.querySub$.unsubscribe()}initRequest(t){t=this.generateQuery(t),this.bookSevice.search(t).subscribe(i=>{this.total=i.itemsCount,this.books=i.data})}generateQuery(t){return"default"===t?`?sort={"creationDate":-1}&skip=${(this.currentPage-1)*this.pageSize}&limit=${this.pageSize}`:`?query={"searchTerm":"${t}"}&sort={"creationDate":-1}&skip=${(this.currentPage-1)*this.pageSize}&limit=${this.pageSize}`}pageChanged(t){this.currentPage=t,this.initRequest(this.currentQuery)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(y.Z),e.Y36(q.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-book-store"]],decls:1,vars:1,consts:[[3,"ngIf"],[1,"top"],["directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","pageChange"],[1,"books-store"],[3,"book",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"bottom"],[3,"book"],[1,"no-results"],["src","https://i.imgur.com/KRVihMq.png","alt","no-item-found"]],template:function(t,i){1&t&&e.YNc(0,ut,8,11,"ng-template",0),2&t&&e.Q6J("ngIf",i.books)},directives:[u.O5,z,u.sg,st.W],pipes:[H],styles:[".books-store[_ngcontent-%COMP%]{margin:30px auto}.top[_ngcontent-%COMP%]{margin-top:50px}.bottom[_ngcontent-%COMP%]{margin-bottom:50px}.book-card[_ngcontent-%COMP%]{border:5px solid transparent;display:inline-block;vertical-align:top;margin:10px;width:15%}.book-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:350px}.book-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:inline-block;font-size:19px}.book-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .book-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .book-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px}.book-card[_ngcontent-%COMP%]:hover{background-color:#91a3b0;border-color:#91a3b0;color:#000}"]}),n})()},{path:"details/:bookId",component:Je},{path:"create",canActivate:[N],component:be},{path:"edit/:bookId",canActivate:[N],component:at},{path:"delete/:bookId",canActivate:[N],component:ke}];let gt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(dt)],g.Bz]}),n})();var mt=l(4065);let _t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,a.UX,gt,$,mt.m]]}),n})()},7457:(k,h,l)=>{const u=l(1773),a=l(3676);k.exports=class e{static Validate(f){return f=f.replace(u.PREFIX,""),!!u.ISBN.test(f)&&a(f)}}},3676:k=>{k.exports=l=>{let u=(l=l.toString()).slice(0,-1);u=u.split("").map(Number);const a=l.slice(-1),e="X"!==a?parseInt(a,10):"X";u=u.map((C,x)=>C*(x+1));const f=u.reduce((C,x)=>C+x,0)%11;return e===(10!==f?f:"X")}},1773:k=>{k.exports={PREFIX:/^ISBN(?:-1[03])?:?\x20+/i,ISBN:/^(?:\d{9}[\dXx]|\d{13})$/}}}]);